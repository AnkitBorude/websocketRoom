<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>Hello From Server </h1>
    <h2>WebSocket Client</h2>
    <h3>Hostname is <span id="hostname"></span></h3>
  <div style="display: flex; flex-direction: row ; width: 100%; 
  padding: 4px; border:1px solid black;align-items: center; justify-content: center; gap: 10px;">
<input type="text" id="msg" placeholder="Type a message" style="height: 400px; width: 400px; padding: 4px; font-size: large;"/>

  <div style="border: 1px solid blue; padding: 4px; display: flex; flex-direction: row ; align-items: center; justify-content: center; gap: 10px; ">
      <button onclick="send()" style="height: 40px; width: 56px; font-size: large; padding: 2px;">Send</button>
      <button onclick="clear()" style="height: 50px; width: 68px; font-size: large; padding: 2px;">Clear Output</button>
</div>

 <div id="messages" style="height: 400px; width: 600px; padding: 4px; border:1px solid black;
 display: flex; flex-direction:column ; align-items: start; justify-content: center; gap: 2px;
 overflow: auto;
 "></div>
  </div>


  <script>
    const hostname=window.location.host;

    document.getElementById('hostname').innerText=hostname;
    const socket = new WebSocket('ws://'+hostname);

    socket.onopen = () => console.log('Connected to server');

    socket.onmessage = (event) => {
      appendMessage(event.data,false);
    };

    socket.onclose = () => console.log('Connection closed');
    socket.onerror = (err) => console.error('Error:', err);

    function send() {
      const input = document.getElementById('msg');
      dataTOSend=input.value.toString().trim();
      socket.send(dataTOSend);
      appendMessage(dataTOSend,true);
      input.value = '';
    }

    function clear()
    {
      document.getElementById('messages').innerHTML="";
    }

    function appendMessage(msg,isSent)
    {
      const h3=document.createElement('p');
      if(isSent)
    {
      h3.style.fontWeight='bold';
      h3.textContent="SENT : " +msg;
    }else
    {
      h3.style.fontWeight='normal';
      h3.textContent='RECIEVED: '+msg;
    }

    document.getElementById('messages').appendChild(h3);
    }
  </script>
</body>
</dl>
</body>
</html>